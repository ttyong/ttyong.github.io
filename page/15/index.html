<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>田勇的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="欢迎来到我的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="田勇的博客">
<meta property="og:url" content="http://tianyong.fun/page/15/index.html">
<meta property="og:site_name" content="田勇的博客">
<meta property="og:description" content="欢迎来到我的博客">
<meta property="article:author" content="TTYONG">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="田勇的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet">
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
<meta name="generator" content="Hexo 4.2.0"></head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/head.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">TTYONG</a></h1>
        </hgroup>

        
        <p class="header-subtitle">比你优秀的人都努力，有什么理由不努力！</p>
        
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/Home">博客首页</a></li>
                        
                            <li><a href="/works">作品展示</a></li>
                        
                            <li><a href="/about">留言打卡</a></li>
                        
                            <li><a href="/FrontEndGuide">前端导航</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail" rel="external nofollow noopener noreferrer">mail</a>
                            
                                <a class="fl github" target="_blank" href="https://github.com/luuman" title="github" rel="external nofollow noopener noreferrer">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="#" title="weibo">weibo</a>
                            
                                <a class="fl google" target="_blank" href="#" title="google">google</a>
                            
                                <a class="fl twitter" target="_blank" href="#" title="twitter">twitter</a>
                            
                                <a class="fl linkedin" target="_blank" href="#" title="linkedin">linkedin</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/ALTER/" style="font-size: 10px;">ALTER</a> <a href="/tags/APlayer/" style="font-size: 10px;">APlayer</a> <a href="/tags/CDN/" style="font-size: 10px;">CDN</a> <a href="/tags/CREATE/" style="font-size: 10px;">CREATE</a> <a href="/tags/C%E5%9F%BA%E6%9C%AC%E5%B8%B8%E8%AF%86/" style="font-size: 10px;">C基本常识</a> <a href="/tags/C%E7%8A%AF%E7%9A%84%E9%94%99%E8%AF%AF/" style="font-size: 10px;">C犯的错误</a> <a href="/tags/DROP/" style="font-size: 10px;">DROP</a> <a href="/tags/HDFS/" style="font-size: 20px;">HDFS</a> <a href="/tags/Hadoop/" style="font-size: 16.67px;">Hadoop</a> <a href="/tags/Hbase/" style="font-size: 10px;">Hbase</a> <a href="/tags/Hexo/" style="font-size: 13.33px;">Hexo</a> <a href="/tags/Hive/" style="font-size: 10px;">Hive</a> <a href="/tags/Mapreduce/" style="font-size: 10px;">Mapreduce</a> <a href="/tags/Pig/" style="font-size: 10px;">Pig</a> <a href="/tags/SELECT/" style="font-size: 10px;">SELECT</a> <a href="/tags/SEO/" style="font-size: 13.33px;">SEO</a> <a href="/tags/SQL/" style="font-size: 16.67px;">SQL</a> <a href="/tags/TOC/" style="font-size: 10px;">TOC</a> <a href="/tags/Text/" style="font-size: 10px;">Text</a> <a href="/tags/URL/" style="font-size: 10px;">URL</a> <a href="/tags/beautifulSoup/" style="font-size: 10px;">beautifulSoup</a> <a href="/tags/bs4/" style="font-size: 10px;">bs4</a> <a href="/tags/charles/" style="font-size: 10px;">charles</a> <a href="/tags/charless/" style="font-size: 10px;">charless</a> <a href="/tags/draft/" style="font-size: 10px;">draft</a> <a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a> <a href="/tags/encrypt/" style="font-size: 10px;">encrypt</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/hadoop%E6%BA%90%E7%A0%81/" style="font-size: 10px;">hadoop源码</a> <a href="/tags/hdfs/" style="font-size: 10px;">hdfs</a> <a href="/tags/hexo/" style="font-size: 20px;">hexo</a> <a href="/tags/hive/" style="font-size: 10px;">hive</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/mapreduce/" style="font-size: 10px;">mapreduce</a> <a href="/tags/nofollw/" style="font-size: 10px;">nofollw</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/pymongo/" style="font-size: 10px;">pymongo</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/python%E7%88%AC%E8%99%AB/" style="font-size: 10px;">python爬虫</a> <a href="/tags/request%E5%BA%93/" style="font-size: 10px;">request库</a> <a href="/tags/re%E5%BA%93/" style="font-size: 10px;">re库</a> <a href="/tags/seo/" style="font-size: 16.67px;">seo</a> <a href="/tags/seo%E4%BC%98%E5%8C%96/" style="font-size: 13.33px;">seo优化</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/urllib/" style="font-size: 10px;">urllib</a> <a href="/tags/vmware/" style="font-size: 10px;">vmware</a> <a href="/tags/xpath/" style="font-size: 10px;">xpath</a> <a href="/tags/yarn/" style="font-size: 10px;">yarn</a> <a href="/tags/zookeeper/" style="font-size: 10px;">zookeeper</a> <a href="/tags/%E4%B9%B1%E7%A0%81/" style="font-size: 13.33px;">乱码</a> <a href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" style="font-size: 10px;">二分查找</a> <a href="/tags/%E4%BA%8C%E7%BB%B4%E7%A0%81/" style="font-size: 10px;">二维码</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 13.33px;">优化</a> <a href="/tags/%E5%85%B3%E9%94%AE%E8%AF%8D%E4%B8%8E%E6%8F%8F%E8%BF%B0/" style="font-size: 10px;">关键词与描述</a> <a href="/tags/%E5%88%9B%E5%BB%BA%E8%A1%A8/" style="font-size: 10px;">创建表</a> <a href="/tags/%E5%88%A0%E9%99%A4/" style="font-size: 10px;">删除</a> <a href="/tags/%E5%88%A0%E9%99%A4%E8%A1%A8/" style="font-size: 10px;">删除表</a> <a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 10px;">加密</a> <a href="/tags/%E5%8A%A0%E9%80%9F/" style="font-size: 10px;">加速</a> <a href="/tags/%E5%8C%85%E5%AF%BC%E5%85%A5/" style="font-size: 10px;">包导入</a> <a href="/tags/%E5%8D%95%E8%AF%8D/" style="font-size: 10px;">单词</a> <a href="/tags/%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6/" style="font-size: 10px;">压缩文件</a> <a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 13.33px;">命令</a> <a href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" style="font-size: 10px;">命令行</a> <a href="/tags/%E5%9B%BE%E7%89%87/" style="font-size: 10px;">图片</a> <a href="/tags/%E5%9C%86%E8%A7%92/" style="font-size: 10px;">圆角</a> <a href="/tags/%E5%A4%96%E9%93%BE/" style="font-size: 10px;">外链</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%A1%8C%E4%B8%9A%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98/" style="font-size: 10px;">大数据行业项目部署实战</a> <a href="/tags/%E5%A4%B4%E5%83%8F/" style="font-size: 10px;">头像</a> <a href="/tags/%E5%A5%BD%E5%8F%8B%E6%8E%A8%E8%8D%90/" style="font-size: 10px;">好友推荐</a> <a href="/tags/%E5%AD%97%E6%95%B0/" style="font-size: 10px;">字数</a> <a href="/tags/%E5%AE%9E%E9%AA%8C%E8%AF%BE/" style="font-size: 13.33px;">实验课</a> <a href="/tags/%E5%AF%B9%E9%BD%90/" style="font-size: 10px;">对齐</a> <a href="/tags/%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7/" style="font-size: 10px;">封装成帧</a> <a href="/tags/%E5%B4%94%E5%BA%86%E6%89%8D/" style="font-size: 13.33px;">崔庆才</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/" style="font-size: 10px;">常用用法</a> <a href="/tags/%E5%BB%96%E9%9B%AA%E5%B3%B0/" style="font-size: 13.33px;">廖雪峰</a> <a href="/tags/%E5%BC%80%E5%90%AF/" style="font-size: 10px;">开启</a> <a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 13.33px;">异常</a> <a href="/tags/%E5%BC%95%E7%94%A8/" style="font-size: 10px;">引用</a> <a href="/tags/%E5%BC%95%E7%94%A8%E8%87%AA%E5%B7%B1%E6%96%87%E7%AB%A0/" style="font-size: 10px;">引用自己文章</a> <a href="/tags/%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E6%B5%8BCRC/" style="font-size: 10px;">循环冗余检测CRC</a> <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 10px;">快捷键</a> <a href="/tags/%E6%89%80%E6%80%9D%E6%89%80%E6%83%B3/" style="font-size: 10px;">所思所想</a> <a href="/tags/%E6%89%93%E8%B5%8F/" style="font-size: 10px;">打赏</a> <a href="/tags/%E6%8E%92%E7%89%88/" style="font-size: 10px;">排版</a> <a href="/tags/%E6%8E%A8%E9%80%81/" style="font-size: 10px;">推送</a> <a href="/tags/%E6%91%98%E5%BD%95/" style="font-size: 10px;">摘录</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89/" style="font-size: 10px;">数据定义</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0/" style="font-size: 10px;">数据更新</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2/" style="font-size: 10px;">数据查询</a> <a href="/tags/%E6%97%8B%E8%BD%AC/" style="font-size: 10px;">旋转</a> <a href="/tags/%E6%A0%87%E9%A2%98%E4%BC%98%E5%8C%96/" style="font-size: 10px;">标题优化</a> <a href="/tags/%E6%A6%82%E8%BF%B0/" style="font-size: 10px;">概述</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">正则表达式</a> <a href="/tags/%E6%BF%80%E6%B4%BB/" style="font-size: 10px;">激活</a> <a href="/tags/%E7%81%AB%E8%BD%A6%E8%AE%A2%E7%A5%A8%E7%B3%BB%E7%BB%9F/" style="font-size: 13.33px;">火车订票系统</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 13.33px;">爬虫</a> <a href="/tags/%E7%89%9B%E9%A1%BF%E6%B3%95/" style="font-size: 10px;">牛顿法</a> <a href="/tags/%E7%89%A9%E7%90%86%E5%B1%82/" style="font-size: 10px;">物理层</a> <a href="/tags/%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">直接插入排序</a> <a href="/tags/%E7%9B%B4%E9%93%BE/" style="font-size: 10px;">直链</a> <a href="/tags/%E7%A0%B4%E8%A7%A3/" style="font-size: 10px;">破解</a> <a href="/tags/%E7%A8%80%E7%96%8F%E5%90%91%E9%87%8F/" style="font-size: 10px;">稀疏向量</a> <a href="/tags/%E7%AC%AC%E4%BA%8C%E7%AB%A0/" style="font-size: 10px;">第二章</a> <a href="/tags/%E7%BA%A6%E6%9D%9F/" style="font-size: 10px;">约束</a> <a href="/tags/%E7%BA%A6%E6%9D%9F%E7%B1%BB%E5%9E%8B/" style="font-size: 10px;">约束类型</a> <a href="/tags/%E7%BA%BF%E6%80%A7%E5%88%86%E7%B1%BB%E5%99%A8/" style="font-size: 10px;">线性分类器</a> <a href="/tags/%E7%BB%93%E6%9E%84/" style="font-size: 10px;">结构</a> <a href="/tags/%E8%8D%89%E7%A8%BF/" style="font-size: 10px;">草稿</a> <a href="/tags/%E8%A7%86%E5%9B%BE/" style="font-size: 10px;">视图</a> <a href="/tags/%E8%A7%A3%E7%A0%81/" style="font-size: 10px;">解码</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 10px;">计算机网络</a> <a href="/tags/%E8%AF%84%E8%AE%BA/" style="font-size: 10px;">评论</a> <a href="/tags/%E8%AF%AD%E6%B3%95/" style="font-size: 16.67px;">语法</a> <a href="/tags/%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93/" style="font-size: 10px;">透明传输</a> <a href="/tags/%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF/" style="font-size: 13.33px;">阅读时长</a> <a href="/tags/%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE/" style="font-size: 10px;">音乐播放</a> <a href="/tags/%E9%A2%84%E6%98%BE%E7%A4%BA/" style="font-size: 10px;">预显示</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://luuman.github.io/" rel="external nofollow noopener noreferrer">name</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">纯海迷、爱运动、爱交友、爱旅行、喜欢接触新鲜事物、迎接新的挑战，更爱游离于错综复杂的编码与逻辑中</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">TTYONG</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">TTYONG</a></h1>
            </hgroup>
            
            <p class="header-subtitle">比你优秀的人都努力，有什么理由不努力！</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/Home">博客首页</a></li>
                
                    <li><a href="/works">作品展示</a></li>
                
                    <li><a href="/about">留言打卡</a></li>
                
                    <li><a href="/FrontEndGuide">前端导航</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=PAkNDgsKBQ4MCnxNTRJfU1E" title="mail" rel="external nofollow noopener noreferrer">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/luuman" title="github" rel="external nofollow noopener noreferrer">github</a>
                    
                        <a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
                    
                        <a class="google" target="_blank" href="#" title="google">google</a>
                    
                        <a class="twitter" target="_blank" href="#" title="twitter">twitter</a>
                    
                        <a class="linkedin" target="_blank" href="#" title="linkedin">linkedin</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-pythonn文件在命令行包导入问题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/pythonn%E6%96%87%E4%BB%B6%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8C%85%E5%AF%BC%E5%85%A5%E9%97%AE%E9%A2%98.html" class="article-date">
      <time datetime="2020-04-11T02:24:16.000Z" itemprop="datePublished">2020-04-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/pythonn%E6%96%87%E4%BB%B6%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8C%85%E5%AF%BC%E5%85%A5%E9%97%AE%E9%A2%98.html">pythonn文件在命令行包导入问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>

<h2 id="命令行下执行python找不包的解决方法"><a href="#命令行下执行python找不包的解决方法" class="headerlink" title="命令行下执行python找不包的解决方法"></a>命令行下执行python找不包的解决方法</h2><p>1.为什么会出现这样的问题?</p>
<p>包是向下搜索机制.</p>
<p>2.为什么idle中执行没有报找不到包的问题?</p>
<p>python搜索机制,在idle中是以项目为根路径, 所以它的搜索机制是从项目根路径开始向下搜索.</p>
<p>3.为什么命令行执行时会报找不到包的错误?</p>
<p>这是因为命令行执行的时候,是以当前执行的.py文件所在目录级别的下一级开始搜索. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root</span><br><span class="line"></span><br><span class="line">.......web(一级目录)</span><br><span class="line"></span><br><span class="line">       ......sett(二级目录)</span><br><span class="line"></span><br><span class="line">       .......views(二级目录)</span><br><span class="line"></span><br><span class="line">       ......service.py(二级目录)  (这个命令行执行文件.  命令行运行时,提示找不到views以及sett中的包.)</span><br><span class="line"></span><br><span class="line">             .......包搜索级别(三级目录)</span><br></pre></td></tr></table></figure>



<p><strong>法一</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#########################################################</span></span><br><span class="line"><span class="comment">#将根目录加入sys.path中,解决命令行找不到包的问题</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">curPath = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line">rootPath = os.path.split(curPath)[<span class="number">0</span>]</span><br><span class="line">sys.path.append(rootPath)</span><br><span class="line"><span class="comment">#########################################################</span></span><br></pre></td></tr></table></figure>

<p><em>以上增加到哪个级别要,根据实际情况,灵活运用.  其实目的就是指定一个顶级目录.来克服向下搜索包的问题.</em></p>
<p><strong>法二</strong></p>
<p><em>在web平级别新建一个py文件. 然后将要执行的py文件导入进去即可.(并不需要作其它操作,看实际情况.)</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> web <span class="keyword">import</span> service</span><br></pre></td></tr></table></figure>



<p><strong>法三</strong></p>
<p><em>cmd命令行进行项目根目录，采用相对路径去执行该py文件</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmd</span><br><span class="line">cd d:\test_project</span><br><span class="line">./main.py  <span class="comment">#相对执行</span></span><br></pre></td></tr></table></figure>



<p><a href="https://www.cnblogs.com/yhleng/p/10330994.html" target="_blank" rel="external nofollow noopener noreferrer"><strong>原文</strong></a></p>
<hr>
<blockquote>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Python/">Python</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8C%85%E5%AF%BC%E5%85%A5/" rel="tag">包导入</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/" rel="tag">命令行</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" class="article-date">
      <time datetime="2020-04-11T01:15:47.000Z" itemprop="datePublished">2020-04-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html">正则表达式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>



<h2 id="常用字符"><a href="#常用字符" class="headerlink" title="常用字符"></a>常用字符</h2><table>
<thead>
<tr>
<th align="center">字符</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\d</td>
<td align="center">数字</td>
</tr>
<tr>
<td align="center">\w</td>
<td align="center">数字或字母</td>
</tr>
<tr>
<td align="center">.</td>
<td align="center">任意单个字符(除了换行符)</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">零个或多个字符</td>
</tr>
<tr>
<td align="center">+</td>
<td align="center">至少一个字符</td>
</tr>
<tr>
<td align="center">？</td>
<td align="center">零个或一个字符</td>
</tr>
<tr>
<td align="center">{n}</td>
<td align="center">前面的表达式匹配n次</td>
</tr>
<tr>
<td align="center">{n,m}</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">\s</td>
<td align="center">匹配一个空格</td>
</tr>
<tr>
<td align="center">\</td>
<td align="center">转义字符</td>
</tr>
<tr>
<td align="center">|</td>
<td align="center">或</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">（匹配一行字符串的开头）^\d以数字开头</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">（匹配一行字符串的结尾）\d$以数字结尾</td>
</tr>
<tr>
<td align="center">[0-9a-zA-z\_]</td>
<td align="center">一个数字，字符或下划线</td>
</tr>
<tr>
<td align="center">[0-9a-zA-z\_]+</td>
<td align="center">如<code>&#39;a100&#39;</code>，<code>&#39;0_Z&#39;</code>，<code>&#39;Py3000&#39;</code>等等</td>
</tr>
<tr>
<td align="center">\A</td>
<td align="center">匹配字符串的开头</td>
</tr>
<tr>
<td align="center">\Z</td>
<td align="center">匹配字符串的结尾</td>
</tr>
<tr>
<td align="center">.*</td>
<td align="center">贪婪匹配</td>
</tr>
<tr>
<td align="center">.*？</td>
<td align="center">非贪婪匹配(在结尾时可能不会匹配)</td>
</tr>
</tbody></table>
<p><em>下划线是特殊字符需要转义</em></p>
<p><em>字母大写代表与小写意思相反</em></p>
<p><em>使用r’…’可以规避特殊字符</em></p>
<h2 id="re库"><a href="#re库" class="headerlink" title="re库"></a>re库</h2><h3 id="match"><a href="#match" class="headerlink" title="match()"></a>match()</h3><p><em>会从字符串的<strong>开头</strong>进行匹配，成功返回<strong>Match</strong>对象；失败返回<strong>None</strong>.</em></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.match(正则表达式，字符串，[修饰符])</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">content = <span class="string">'hello, 122323 world _ this is a regex demo'</span></span><br><span class="line">result = re.match(<span class="string">r'^he.*(/d+).*demo$'</span>, content)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(<span class="number">1</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>match object</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> <span class="comment"># 因为.*为贪婪匹配，会尽可能多的匹配</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">content = <span class="string">'http://weibo.com/comment/KERGCN'</span></span><br><span class="line">result1 = re.match(<span class="string">r'http.*?comment(.*?)'</span>, content) <span class="comment"># 在结尾尽可能少的匹配</span></span><br><span class="line">result2 = re.match(<span class="string">r'http.*?/(.*?)/KERGCN'</span>, content)</span><br><span class="line">print(result1.group(<span class="number">1</span>))</span><br><span class="line">print(result2.group(<span class="number">1</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>comment</span><br></pre></td></tr></table></figure>

<h4 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h4><table>
<thead>
<tr>
<th align="center">修饰符名</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">re.I</td>
<td align="center">匹配对大小写不敏感</td>
</tr>
<tr>
<td align="center">re.L</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">re.M</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">re.S</td>
<td align="center">使.匹配任意字符</td>
</tr>
<tr>
<td align="center">re.U</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">re.S</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="search"><a href="#search" class="headerlink" title="search()"></a>search()</h3><p><em>从字符串中寻找是否有匹配的片段；然后返回第一个匹配的结果</em></p>
<p><em>要注意绝大部分的html文本都会包含大量的换行符，所以尽量加上re.S修饰符，避免出现匹配不到的问题</em></p>
<h3 id="compile"><a href="#compile" class="headerlink" title="compile()"></a>compile()</h3><p><em>用于把一个反复用的正则表达式生成对象</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pattern = re.compile(regex)</span><br><span class="line">patter.search(<span class="string">'....'</span>)</span><br></pre></td></tr></table></figure>



<h3 id="其它方法"><a href="#其它方法" class="headerlink" title="其它方法"></a>其它方法</h3><h4 id="re-findall"><a href="#re-findall" class="headerlink" title="re.findall()"></a>re.findall()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.findall(patter, string, flag=<span class="number">0</span>) <span class="comment"># 返回列表</span></span><br></pre></td></tr></table></figure>



<h4 id="re-split"><a href="#re-split" class="headerlink" title="re.split()"></a>re.split()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.split(pattern, string, maxsplit=<span class="number">0</span>, flag=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>



<h4 id="re-finditer"><a href="#re-finditer" class="headerlink" title="re.finditer()"></a>re.finditer()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">results = re.finditer(pattern, string, flag=<span class="number">0</span>) <span class="comment"># 生成正则表达式匹配结果的生成器</span></span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">    print(result)</span><br></pre></td></tr></table></figure>



<h4 id="re-sub"><a href="#re-sub" class="headerlink" title="re.sub()"></a>re.sub()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.sub(pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>



<h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><p><strong>使用（）</strong></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">result.group(<span class="number">0</span>) <span class="comment"># 获取的是原字符串</span></span><br><span class="line">result.group(NO.) <span class="comment"># 获取对应第几个子串</span></span><br><span class="line">result.groups() <span class="comment"># 返回生成的子串元组</span></span><br></pre></td></tr></table></figure>



<h3 id="贪婪匹配"><a href="#贪婪匹配" class="headerlink" title="贪婪匹配"></a>贪婪匹配</h3><p><em>正则表达式默认都是尽可能多的匹配</em></p>
<h3 id="非贪婪匹配"><a href="#非贪婪匹配" class="headerlink" title="非贪婪匹配"></a>非贪婪匹配</h3><p><em>在后面加一个?</em></p>
<p>/d+?</p>
<p>.*?</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'a b   c'</span>.split(<span class="string">' '</span>)</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">'c'</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'[\s\,]+'</span>, <span class="string">'a,b, c  d'</span>)</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.split(<span class="string">r'[\s\,\;]+'</span>, <span class="string">'a,b;; c  d'</span>)</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.match(<span class="string">r'^(\d+)(0*)$'</span>, <span class="string">'102300'</span>).groups()</span><br><span class="line">(<span class="string">'102300'</span>, <span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.match(<span class="string">r'^(\d+?)(0*)$'</span>, <span class="string">'102300'</span>).groups()</span><br><span class="line">(<span class="string">'1023'</span>, <span class="string">'00'</span>)</span><br></pre></td></tr></table></figure>



<hr>
<blockquote>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Python/">Python</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-pip命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/pip%E5%91%BD%E4%BB%A4.html" class="article-date">
      <time datetime="2020-04-11T01:13:42.000Z" itemprop="datePublished">2020-04-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/pip%E5%91%BD%E4%BB%A4.html">pip命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>



<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><h3 id="普通安装"><a href="#普通安装" class="headerlink" title="普通安装"></a>普通安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --timeout 8000 package</span><br></pre></td></tr></table></figure>

<h3 id="使用镜像安装"><a href="#使用镜像安装" class="headerlink" title="使用镜像安装"></a>使用镜像安装</h3><h4 id="使用国内镜像源"><a href="#使用国内镜像源" class="headerlink" title="使用国内镜像源"></a>使用国内镜像源</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install 包名 -i http:&#x2F;&#x2F;pypi.douban.com&#x2F;simple&#x2F; --trusted-host pypi.douban.com</span><br><span class="line">这个是豆瓣源</span><br><span class="line">--trusted-host pypi.douban.com 这是为了获得ssl证书的认证，要不然会报错</span><br></pre></td></tr></table></figure>

<p><strong>国内镜像源</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">清华：https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br><span class="line"></span><br><span class="line">阿里云：http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;</span><br><span class="line"></span><br><span class="line">中国科技大学 https:&#x2F;&#x2F;pypi.mirrors.ustc.edu.cn&#x2F;simple&#x2F;</span><br><span class="line"></span><br><span class="line">华中理工大学：http:&#x2F;&#x2F;pypi.hustunique.com&#x2F;</span><br><span class="line"></span><br><span class="line">山东理工大学：http:&#x2F;&#x2F;pypi.sdutlinux.org&#x2F; </span><br><span class="line"></span><br><span class="line">豆瓣：http:&#x2F;&#x2F;pypi.douban.com&#x2F;simple&#x2F;</span><br></pre></td></tr></table></figure>

<h4 id="直接修改文件"><a href="#直接修改文件" class="headerlink" title="直接修改文件"></a>直接修改文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url &#x3D; http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F;</span><br><span class="line">[install]</span><br><span class="line">trusted-host&#x3D;mirrors.aliyun.com</span><br></pre></td></tr></table></figure>

<p><em>windows下，直接在user目录中创建一个pip目录，如：C:\Users\xx\pip，新建文件pip.ini。内容同上。本机win10操作系统，目录：C:\Users\DELL\AppData\Roaming\pip\pip.ini</em></p>
<h3 id="pip更新"><a href="#pip更新" class="headerlink" title="pip更新"></a>pip更新</h3><h4 id="python-m-pip-install-–upgrade-pip"><a href="#python-m-pip-install-–upgrade-pip" class="headerlink" title="python -m pip install –upgrade pip"></a>python -m pip install –upgrade pip</h4><h3 id="python版本替换批量迁移模块"><a href="#python版本替换批量迁移模块" class="headerlink" title="python版本替换批量迁移模块"></a>python版本替换批量迁移模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 旧版本Scripts路径下执行</span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line"># 新版本Scripts路径下执行 </span><br><span class="line">pip install -r requirements.txt -i 镜像源</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- requirements.txt格式</span><br><span class="line">alembic&#x3D;&#x3D;0.8.6</span><br><span class="line">bleach&#x3D;&#x3D;1.4.3</span><br><span class="line">click&#x3D;&#x3D;6.6</span><br><span class="line">dominate&#x3D;&#x3D;2.2.1</span><br><span class="line">Flask&#x3D;&#x3D;0.11.1</span><br></pre></td></tr></table></figure>



<h3 id="包更新"><a href="#包更新" class="headerlink" title="包更新"></a>包更新</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U 包名</span><br></pre></td></tr></table></figure>





<hr>
<blockquote>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Python/">Python</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pip/" rel="tag">pip</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python乱码问题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98.html" class="article-date">
      <time datetime="2020-04-10T06:26:44.000Z" itemprop="datePublished">2020-04-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98.html">python乱码问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>

<p>一、在文件头部添加如下注释码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">coding=&lt;encoding name&gt; 例如，可添加<span class="comment"># coding=utf-8</span></span><br></pre></td></tr></table></figure>



<p>二、在文件头部添加如下两行注释码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: &lt;encoding name&gt; -*- 例如，可添加# -*- coding: utf-8 -*-</span></span><br></pre></td></tr></table></figure>



<p>三、在文件头部添加如下两行注释码：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim: set fileencoding=&lt;encoding name&gt; : </span></span><br><span class="line">例如，可添加</span><br><span class="line"><span class="comment"># vim: set fileencoding=utf-8 :</span></span><br></pre></td></tr></table></figure>



<p>四、我们可以通过先把中文解码为unicode，然后在转化为gbk来解决这个问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">'吃葡萄不吐葡萄皮儿'</span></span><br><span class="line">print(a..decode(<span class="string">'utf-8'</span>).encode(<span class="string">'gbk'</span>))</span><br></pre></td></tr></table></figure>



<p>五、通过改变cmd命令行窗口的输出格式来解决这个问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chcp <span class="number">65001</span> 就是换成UTF<span class="number">-8</span>代码页</span><br><span class="line">chcp <span class="number">936</span> 可以换回默认的GBK</span><br></pre></td></tr></table></figure>

<p><em>但是这样就降低了脚本的兼容性，在其他环境运行的时候可能还会出现这样的错误</em></p>
<p>————————————————<br>版权声明：本文为CSDN博主「TTOP」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/u013634961/article/details/38826189" target="_blank" rel="external nofollow noopener noreferrer">https://blog.csdn.net/u013634961/article/details/38826189</a></p>
<hr>
<blockquote>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Python/">Python</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%B1%E7%A0%81/" rel="tag">乱码</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python解析库-Xpath" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python%E8%A7%A3%E6%9E%90%E5%BA%93-Xpath.html" class="article-date">
      <time datetime="2020-04-06T06:27:47.000Z" itemprop="datePublished">2020-04-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python%E8%A7%A3%E6%9E%90%E5%BA%93-Xpath.html">python解析库-Xpath</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              这是一篇加密文章
          
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/xpath/" rel="tag">xpath</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/python%E8%A7%A3%E6%9E%90%E5%BA%93-Xpath.html#more">大航海 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python数据库-pymongo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python%E6%95%B0%E6%8D%AE%E5%BA%93-pymongo.html" class="article-date">
      <time datetime="2020-04-06T04:24:37.000Z" itemprop="datePublished">2020-04-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python%E6%95%B0%E6%8D%AE%E5%BA%93-pymongo.html">python数据库-pymongo</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>



<h2 id="MongoDB存储"><a href="#MongoDB存储" class="headerlink" title="MongoDB存储"></a>MongoDB存储</h2><p><strong>[官方文档](<a href="http://api.mongodb.com/python/current/api/pymongo/" target="_blank" rel="external nofollow noopener noreferrer">http://api.mongodb.com/python/current/api/pymongo/</a><br>collection.html)</strong>  </p>
<p><em>MongoDB是 由 C++语言编写的非关系型数据库，是一个基于分布式文件存储的开源数据库系统，其内容存储形式类似JSON对 象 ，它的字段值可以包含其他文档、数组及文档数组，非常灵活。</em></p>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p><em>安装好pymongo并启动服务</em></p>
<h3 id="连接MongoDB"><a href="#连接MongoDB" class="headerlink" title="连接MongoDB"></a>连接MongoDB</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line">client = pymongo.MongoClient(host=<span class="string">'localhost'</span>, port=<span class="number">27017</span>) </span><br><span class="line">等同于</span><br><span class="line">client = MogoClient(<span class="string">'mongodb://localhost:27017/'</span>)</span><br></pre></td></tr></table></figure>



<h3 id="指定数据库"><a href="#指定数据库" class="headerlink" title="指定数据库"></a>指定数据库</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db = client.数据库名</span><br><span class="line">等同于</span><br><span class="line">db = client[<span class="string">'数据库名'</span>]</span><br></pre></td></tr></table></figure>



<h3 id="指定集合"><a href="#指定集合" class="headerlink" title="指定集合"></a>指定集合</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">collection = db.集合名</span><br><span class="line">等同于</span><br><span class="line">collection = db[<span class="string">'集合名'</span>]</span><br></pre></td></tr></table></figure>



<h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><h4 id="insert-，-insert-one-insert-many"><a href="#insert-，-insert-one-insert-many" class="headerlink" title="insert()， insert_one(), insert_many()"></a>insert()， insert_one(), insert_many()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 插入单条</span></span><br><span class="line">result = collection.insert(&#123;<span class="string">''</span>:<span class="string">""</span>&#125;) <span class="comment"># 会自动为数据产生_id标识，并返回</span></span><br><span class="line"><span class="comment"># 插入多条</span></span><br><span class="line">result = collection.insert([&#123;&#125;, &#123;&#125;]) <span class="comment"># 返回_id集合</span></span><br><span class="line">print(result)</span><br><span class="line"><span class="comment">## python3.x推荐使用下列方式,返回的是InsertOneResult</span></span><br><span class="line">insert_one()</span><br><span class="line">insert_many()</span><br><span class="line">print(result.inserted_id)</span><br><span class="line">print(result.inserted_ids)</span><br></pre></td></tr></table></figure>



<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><h4 id="find-find-one"><a href="#find-find-one" class="headerlink" title="find(), find_one()"></a>find(), find_one()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bson.objectid <span class="keyword">import</span> ObjectId</span><br><span class="line"><span class="comment"># 得到一个结果</span></span><br><span class="line">result = collection.find_one(&#123;<span class="string">"a"</span>:<span class="string">"b"</span>&#125;) <span class="comment"># 没有返回None</span></span><br><span class="line">result = collection.find_one(&#123;<span class="string">"_id"</span>:<span class="string">"ObjectId('1325645654')"</span>&#125;)</span><br><span class="line"><span class="comment"># 得到生成器对象</span></span><br><span class="line">results = collection.find(&#123;<span class="string">"age"</span>:<span class="string">"20"</span>&#125;) <span class="comment"># pymongo.cursor</span></span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">    print(result)</span><br><span class="line"></span><br><span class="line">results = collection.find(&#123;<span class="string">"age"</span>:&#123;<span class="string">'$gt'</span>:<span class="number">20</span>&#125;&#125;) <span class="comment"># 大于20的</span></span><br></pre></td></tr></table></figure>

<h5 id="随机查询"><a href="#随机查询" class="headerlink" title="随机查询"></a>随机查询</h5><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">results = collection.aggregate([ &#123;<span class="string">'$sample'</span>: &#123;<span class="string">'size'</span>:<span class="number">2000</span>&#125;&#125;]) <span class="comment"># 生成生成器</span></span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>





<h5 id="比较符"><a href="#比较符" class="headerlink" title="比较符"></a>比较符</h5><p><a href="https://imgchr.com/i/GyHdBV" target="_blank" rel="external nofollow noopener noreferrer"><img src="https://s1.ax1x.com/2020/04/06/GyHdBV.png" alt="GyHdBV.png" border="0" width="600/"></a></p>
<h5 id="用正则表达式"><a href="#用正则表达式" class="headerlink" title="用正则表达式"></a>用正则表达式</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">results = collection.find (&#123; <span class="string">'name'</span>: &#123;<span class="string">'$ regex'</span>:<span class="string">'^M.*'</span>&#125;&#125; )</span><br><span class="line"><span class="comment"># 这里使用$regex来指定正则匹配，人M.*代表以 M 开头的正则表达式。</span></span><br></pre></td></tr></table></figure>

<h5 id="功能符"><a href="#功能符" class="headerlink" title="功能符"></a>功能符</h5><img src="https://s1.ax1x.com/2020/04/06/GybBrt.png" alt="GybBrt.png" border="0" width="600/">



<h3 id="计数"><a href="#计数" class="headerlink" title="计数"></a>计数</h3><h4 id="count"><a href="#count" class="headerlink" title="count()"></a>count()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = colletion.find().count()</span><br></pre></td></tr></table></figure>



<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><h4 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">results = colletion.find().sort(<span class="string">'name'</span>,pymongo.ASCENDING)</span><br><span class="line">print([result[<span class="string">'name'</span>] <span class="keyword">for</span> result <span class="keyword">in</span> results])</span><br></pre></td></tr></table></figure>

<p><em>这里我们调用pymongo.ASCENDING指定升序。如果要降序排列，可以传入pymongo.DESCENDING</em>  </p>
<h3 id="偏移"><a href="#偏移" class="headerlink" title="偏移"></a>偏移</h3><h4 id="skip"><a href="#skip" class="headerlink" title="skip()"></a>skip()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">results = collection.find().sort(<span class="string">'name'</span>, pymongo.ASCENDING).skip(<span class="number">2</span>)</span><br><span class="line">print([result[<span class="string">'name'</span>] <span class="keyword">for</span> resuLt <span class="keyword">in</span> results])</span><br><span class="line">运行结果如下：</span><br><span class="line">[<span class="string">'Kevin'</span>, <span class="string">'Mark'</span>, <span class="string">'Mike'</span>]</span><br></pre></td></tr></table></figure>

<p><em>值得注意的是，在数据库数量非常庞大的时候，如千万、亿级别，最好不要使用大的偏移量来查询数据，因为这样很可能导致内存溢出。此时可以使用类似如下操作来查询</em>  </p>
<h4 id="limit"><a href="#limit" class="headerlink" title="limit()"></a>limit()</h4><p><em>设置结果个数</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">results = collection.find().sort(<span class="string">'name'</span>, pymongo.ASCENDING).skip(<span class="number">2</span>).limit(<span class="number">2</span>)</span><br><span class="line">print([result[<span class="string">'name'</span>] <span class="keyword">for</span> result <span class="keyword">in</span> results])</span><br><span class="line">运行结果如下：</span><br><span class="line">[<span class="string">'Kevin'</span>, <span class="string">'Mark'</span>]</span><br></pre></td></tr></table></figure>



<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><h4 id="update"><a href="#update" class="headerlink" title="update()"></a>update()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">condition &#x3D; &#123;&quot;d&quot;: &#39;c&#39;&#125;</span><br><span class="line">dict &#x3D; colletion.find_one(condition)</span><br><span class="line">dict[&quot;a&quot;] &#x3D; &quot;b&quot;</span><br><span class="line">collection.update(condition, dict) &#x2F;&#x2F; 覆盖以前的所有</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;&#123;&#39;ok&#39;: 1, &#39;nModified*: 1, &#39;n&#39;: 1, &#39;updatedExisting&#39;: True&#125;</span><br><span class="line"></span><br><span class="line">collection.update(condition, &#123;&#39;$set&#39;: dict&#125;) &#x2F;&#x2F; 只更新存在的字段，其它字段不会删除</span><br></pre></td></tr></table></figure>

<p><em>update( ) 方 法 其 实 也 是 官 方 不 推 荐 使 用 的 方 法 。这 里 也 分 为 update_one()方法和updatejnany()方法，用法更加严格，它们的第二个参数需要使用$类型操作符作为字典的键名</em></p>
<h4 id="update-one"><a href="#update-one" class="headerlink" title="update_one()"></a>update_one()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="update-many"><a href="#update-many" class="headerlink" title="update_many()"></a>update_many()</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><em>其返回结果是UpdateResult类型。然后分别J调用 matched_count和 modified_count<br>属性，可以获得匹配的数据条数和影响的数据条数</em></p>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><h4 id="remove"><a href="#remove" class="headerlink" title="remove()"></a>remove()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colletion.remove(condition)</span><br></pre></td></tr></table></figure>

<h4 id="delete-one"><a href="#delete-one" class="headerlink" title="delete_one()"></a>delete_one()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collection.delete_one(condtion)</span><br></pre></td></tr></table></figure>

<h4 id="delete-many"><a href="#delete-many" class="headerlink" title="delete_many()"></a>delete_many()</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colletion.delete_one(&#123;<span class="string">'age'</span>:&#123;<span class="string">'$lt'</span>: <span class="number">25</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>

<p><em>它们的返回结果 都 是 DeleteResult类型，可以调用deleted_count属性获取删除的数据条数。</em>  </p>
<h3 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a>其他操作</h3><p><em>另外， PyMongo 还提供了一些组合方法，女口find_one_and_delete()、 find_one_and_replace()和find_one_and_update(),它们是查找后删除、替换和更新操作，其用法与上述方法基本一致。另外，还可以对索引进行操作，相 关 方 法 有 create_index()、 create_indexes()和 drop_index()等。</em>  </p>
<hr>
<blockquote>
<p>钟表可以回到起点，但永远不会回到昨天。</p>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/python%E6%95%B0%E6%8D%AE%E5%BA%93/">python数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pymongo/" rel="tag">pymongo</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-前端基础" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80.html" class="article-date">
      <time datetime="2020-04-05T08:00:37.000Z" itemprop="datePublished">2020-04-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80.html">前端基础</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>

<h2 id="20代表一个空格的意思"><a href="#20代表一个空格的意思" class="headerlink" title="%20代表一个空格的意思"></a>%20代表一个空格的意思</h2><hr>
<blockquote>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python的HTTP的请求库-Request" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python%E7%9A%84HTTP%E7%9A%84%E8%AF%B7%E6%B1%82%E5%BA%93-Request.html" class="article-date">
      <time datetime="2020-04-05T07:18:08.000Z" itemprop="datePublished">2020-04-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python%E7%9A%84HTTP%E7%9A%84%E8%AF%B7%E6%B1%82%E5%BA%93-Request.html">python的HTTP的请求库-Request</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>



<h1 id="Request库"><a href="#Request库" class="headerlink" title="Request库"></a>Request库</h1><p><em>常用的url请求库，是python的第三方库</em></p>
<p><a href="http://www.python-requests.org" target="_blank" rel="external nofollow noopener noreferrer">官方文档</a></p>
<p><a href="http://docs.python-requests.org/zh_CN/latest" target="_blank" rel="external nofollow noopener noreferrer">中文文档</a></p>
<h2 id="安装Request"><a href="#安装Request" class="headerlink" title="安装Request"></a>安装Request</h2><h3 id="pip安装"><a href="#pip安装" class="headerlink" title="pip安装"></a>pip安装</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> request</span><br></pre></td></tr></table></figure>

<h3 id="wheel安装"><a href="#wheel安装" class="headerlink" title="wheel安装"></a>wheel安装</h3><p><em>wheel是 <strong>Python</strong>的一种<strong>安装包</strong>，其后缀为<strong>.whl</strong>,在网速较差的情况下可以选择<strong>下载wheel文件</strong>再安装，<strong>然后直接用p ip3命令加文件名安装即可</strong>。不过在这之前<strong>需要先安装wheel库</strong>：</em>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install wheel</span><br></pre></td></tr></table></figure>

<p><em>然后在<strong>PyPI</strong>上下载对应的wheel文件。进入cmd中进入下载路径：</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install xxxx.whl</span><br></pre></td></tr></table></figure>

<h3 id="源码安装"><a href="#源码安装" class="headerlink" title="源码安装"></a>源码安装</h3><p><em>如果你不想用pip来安装，或者想获取某一特定版本，可以<strong>选择下载源码</strong>安装。此种方式需要先找到此库的源码地址，然后下载下来再用命令安装</em></p>
<p>  <em>requests 项 目的地址是： <a href="https://github.com/kennethreitz/requests" target="_blank" rel="external nofollow noopener noreferrer">https://github.com/kennethreitz/requests</a></em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- git下载源代码</span><br><span class="line">git clone git:&#x2F;&#x2F;github.com&#x2F;kennethieitz&#x2F;requests.git</span><br><span class="line"></span><br><span class="line">-- 或者使用curl下载</span><br><span class="line">curl -OL https:&#x2F;&#x2F;github.com&#x2F;kennethreitz&#x2F;:requests&#x2F;tmrba]l&#x2F;nimster</span><br></pre></td></tr></table></figure>

<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 下载下来之后，进入目录，执行如下命令即可安装：</span><br><span class="line"><span class="built_in">cd</span> requests</span><br><span class="line">python3 setup.py install</span><br><span class="line">-- 命令执行结束后即可完成requests的安装</span><br></pre></td></tr></table></figure>

<h2 id="Request库使用"><a href="#Request库使用" class="headerlink" title="Request库使用"></a>Request库使用</h2><p><em><a href="http://httpbin.org/get" target="_blank" rel="external nofollow noopener noreferrer">http://httpbin.org/get</a>, 请求为get请求时作出响应，返回请求头信息</em></p>
<p><em>*<a href="http://httpbin.org/post" target="_blank" rel="external nofollow noopener noreferrer">http://httpbin.org/post</a>, 请求为get请求时作出响应，返回请求头信息</em></p>
<h3 id="七个主要方法"><a href="#七个主要方法" class="headerlink" title="七个主要方法"></a>七个主要方法</h3><p><em>request(), get(), head(), put(), post(), patch(), delete()</em></p>
<h3 id="GET请求"><a href="#GET请求" class="headerlink" title="GET请求"></a>GET请求</h3><p><em>请求的链接为<a href="http://httpbin.org/get" target="_blank" rel="external nofollow noopener noreferrer">http://httpbin.org/get</a>, 该网站会判断如果客户端发起的是GET请求的话，它返回相应的请求信息</em></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://httpbin.org/get'</span></span><br><span class="line">r = requests.get(url)</span><br></pre></td></tr></table></figure>

<h4 id="params参数"><a href="#params参数" class="headerlink" title="params参数"></a>params参数</h4><p><em>用于url添加参数</em></p>
<p><em>通常参数都是以字典形式存储的</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://httpbin.org/get'</span></span><br><span class="line">data = &#123;<span class="string">'name'</span>: <span class="string">'germey'</span>, <span class="string">'age'</span>: <span class="number">22</span>&#125;</span><br><span class="line">r = requests.get(url, params=data)</span><br></pre></td></tr></table></figure>

<h4 id="headers参数"><a href="#headers参数" class="headerlink" title="headers参数"></a>headers参数</h4><p><em>里面有的字段可以是User-Agent, Cookies, Host等</em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">headers = &#123;'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_ll_4) AppleWebKit/537.36 (KHTML, like Gecko)</span><br><span class="line">Chrome/52・0.2743・116 Safari/537・36'</span><br><span class="line">&#125;</span><br><span class="line">r = requests.get(url, headers=headers)</span><br></pre></td></tr></table></figure>



<h4 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h4><h5 id="json"><a href="#json" class="headerlink" title="json()"></a>json()</h5><p><em>返回类型实际上是*</em>str类型<strong>，但是它很特殊，是 **JSON格式的</strong>，调 用 jso n()方法，就可以将返回结果是JSON格式的字符串转化为<strong>字典*</strong>  </p>
<p><em>如果返回结果不是JSON格式，便会出现解析错误，抛出json.decoder.JSONDecodeErrar<br>异常</em>  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get("http://httpbin.org/get")</span><br><span class="line">print(type(r.text))</span><br><span class="line">print(r.json())</span><br><span class="line">print(type(r.json())</span><br></pre></td></tr></table></figure>

<h5 id="r-text"><a href="#r-text" class="headerlink" title="r.text"></a>r.text</h5><h5 id="r-status-code"><a href="#r-status-code" class="headerlink" title="r.status_code"></a>r.status_code</h5><h5 id="r-encoding和r-apparent-encoding"><a href="#r-encoding和r-apparent-encoding" class="headerlink" title="r.encoding和r.apparent_encoding"></a>r.encoding和r.apparent_encoding</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- encoding 从header中猜测的编码方式</span><br><span class="line">-- apparent_encoding 从内容分析的编码格式</span><br><span class="line">r.encodeing = r.apparent_encoding</span><br></pre></td></tr></table></figure>

<h5 id="r-url"><a href="#r-url" class="headerlink" title="r.url"></a>r.url</h5><h5 id="r-content"><a href="#r-content" class="headerlink" title="r.content"></a>r.content</h5><h5 id="r-history"><a href="#r-history" class="headerlink" title="r.history"></a>r.history</h5><h5 id="r-cookies"><a href="#r-cookies" class="headerlink" title="r.cookies"></a>r.cookies</h5><h4 id="抓取网页"><a href="#抓取网页" class="headerlink" title="抓取网页"></a>抓取网页</h4><p><em>通常是直接返回html文本或json格式数据</em></p>
<h4 id="抓取二进制数据"><a href="#抓取二进制数据" class="headerlink" title="抓取二进制数据"></a>抓取二进制数据</h4><p><em>图片、音 频 、视频这些文件本质上都是由二进制码组成的，想要抓取它们，就要拿到它们的二进制码</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url) <span class="comment"># 假设这里是图片链接</span></span><br><span class="line">print(r.text) <span class="comment"># 乱码</span></span><br><span class="line">print(r.content) <span class="comment"># 二进制数据</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'favicon.ico'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(r.content)</span><br></pre></td></tr></table></figure>
<h4 id="内置状态码查询对象"><a href="#内置状态码查询对象" class="headerlink" title="内置状态码查询对象"></a>内置状态码查询对象</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit() <span class="keyword">if</span> <span class="keyword">not</span> r.status_code == requests.codes.ok <span class="keyword">else</span> print(<span class="string">'requests Successfully'</span>)</span><br></pre></td></tr></table></figure>



<h3 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="string">'name'</span>:<span class="string">'germey'</span>, <span class="string">'age'</span>: <span class="string">'22'</span>&#125;</span><br><span class="line">r = requests.post(<span class="string">'http://httpbin.org/post'</span>, data=data)</span><br></pre></td></tr></table></figure>

<p><em>提交内容在form字段中</em></p>
<h4 id="响应-1"><a href="#响应-1" class="headerlink" title="响应"></a>响应</h4><p><em>方法和get响应结果差不多</em></p>
<h3 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h3><h4 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">files = &#123;<span class="string">'file'</span>: open(<span class="string">'favicon.ico'</span>, <span class="string">'rb'</span>)&#125;</span><br><span class="line">r = requests.post(<span class="string">'http://httpbin.org/post'</span>, files=files)</span><br><span class="line">print(r.text) <span class="comment"># 在请求头的files字段</span></span><br></pre></td></tr></table></figure>

<h4 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h4><h5 id="通过headers参数添加cookies"><a href="#通过headers参数添加cookies" class="headerlink" title="通过headers参数添加cookies"></a>通过headers参数添加cookies</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url)</span><br><span class="line">cookies = r.cookies  <span class="comment"># 可以发现它是RequestCookieJar类型。</span></span><br><span class="line">然 后 用 items。 方法将其转化为元组组成的列表</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> r.cookies.items():</span><br><span class="line">    print(key + <span class="string">'='</span> + value)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 也可以直接用Cookie来维持登录状态</span></span><br><span class="line">headers = &#123;<span class="string">'Cookie'</span>: <span class="string">'.....'</span>, <span class="string">'Host'</span>: <span class="string">'...'</span>, <span class="string">'User-Agent'</span>: <span class="string">'....'</span>&#125;</span><br><span class="line">r = requests.get(url, headers=headers)</span><br></pre></td></tr></table></figure>

<h5 id="通过cookies模块"><a href="#通过cookies模块" class="headerlink" title="通过cookies模块"></a>通过cookies模块</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cookies = <span class="string">'x=xxxx;x=xxxxx;x=xxxx'</span></span><br><span class="line">jar = requests.cookies.RquestsCookieJar()</span><br><span class="line">headers = &#123;<span class="string">'Host'</span>: <span class="string">'xxx'</span>, <span class="string">'User-Agent'</span>: <span class="string">'xxx'</span>&#125;</span><br><span class="line"><span class="keyword">for</span> cookie <span class="keyword">in</span> cookies.split(<span class="string">';'</span>):</span><br><span class="line">    key, value = cooke.split(<span class="string">'='</span>, <span class="number">1</span>)</span><br><span class="line">    jar.set(key, value)</span><br><span class="line">r = requests.get(url, cookies=jar, headers=headers)</span><br></pre></td></tr></table></figure>

<h4 id="会话维持"><a href="#会话维持" class="headerlink" title="会话维持"></a>会话维持</h4><p><em>在 requests中，如果直接利用g et()或 post()等方法的确可以做到模拟网页的请求，但是这实际上是相当于不同的会话，也就是说相当于你用了两个浏览器打开了不同的页面</em></p>
<h5 id="请求时设置相同的Cookies"><a href="#请求时设置相同的Cookies" class="headerlink" title="请求时设置相同的Cookies"></a>请求时设置相同的Cookies</h5><p><em>这种方法比较麻烦</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#例</span></span><br><span class="line">r1 = requests.post(xxx, headers=&#123;...,<span class="string">'Cookies'</span>=<span class="string">'xxx'</span>,....&#125;)</span><br><span class="line">r2 = requests.get(xxx, headers=&#123;...,<span class="string">'Cookies'</span>=<span class="string">'xxx'</span>,....&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="使用session"><a href="#使用session" class="headerlink" title="使用session"></a>使用session</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = requests.Session()</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/number/123456789'</span>)</span><br><span class="line">r = s.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(r.text) <span class="comment"># &#123;"cookies": &#123;"number": "123456789"&#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="SSL证书验证"><a href="#SSL证书验证" class="headerlink" title="SSL证书验证"></a>SSL证书验证</h4><p><em>requests还提供证书验证。当请求有些url时，会检查ssl证书，如12306</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(<span class="string">'https://www.12306.cn'</span>)</span><br><span class="line">print(r.status_code)</span><br><span class="line">/*requests.exceptions.SSLError: (<span class="string">"bad handshake: Error([('SSL routines', *tls_process_server_certificate',</span></span><br><span class="line"><span class="string">'certificate verify failed')],)"</span>,)*/</span><br></pre></td></tr></table></figure>

<p><em>请求一个HTTPS站点，但是证书验证错误，就会报错。可以通过设置*</em>verify参数<strong>的值为</strong>False***</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(<span class="string">'https://www.12306.cn'</span>, verify=<span class="literal">False</span>)</span><br><span class="line">print(response.status_code) </span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">/*/usr/local/lib/python3<span class="number">.6</span>/site-packages/urllib3/connectionpool.py:<span class="number">852</span>: InsecureRequestWarning: Unverified</span><br><span class="line">HTTPS request <span class="keyword">is</span> being made. Adding certificate verification <span class="keyword">is</span> strongly advised. See:</span><br><span class="line">https://urllib3•readthedocs.io/en/latest/advanced-usage.html<span class="comment">#ssl-warnings</span></span><br><span class="line">InsecureRequestWarning)</span><br><span class="line"><span class="number">200</span>*/</span><br></pre></td></tr></table></figure>

<p><em>不过我们发现<strong>报了一个警告</strong>，它建议我们给它指定证书。我们可以通过<strong>设置忽略警告</strong>的方式来屏蔽这个警告</em>  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置屏蔽</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requets.packages <span class="keyword">import</span> urllib3</span><br><span class="line"></span><br><span class="line">urllib3.disable_warnings()</span><br><span class="line">r = requests.get(url, verify=<span class="literal">False</span>)</span><br><span class="line">print(r.status_code) <span class="comment"># 200</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 捕获警告到日志</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">logging.captureWarning(<span class="literal">True</span>)</span><br><span class="line">r = requests.get(url, verify=<span class="literal">False</span>)</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 指定一个本地证书到客户端证书</span><br><span class="line">r &#x3D; requests.get(url, cert&#x3D;(&#39;&#x2F;path&#x2F;server.crt&#39;, &#39;&#x2F;path&#x2F;key&#39;))</span><br></pre></td></tr></table></figure>

<p><em>当然，我们也可以指定一个本地证书用作客户端证书，这可以是单个文件(包含密钥和证书)或<br>一个包含两个文件路径的元组。当然，上面的代码是演示实例，我 们 需 要 有crt和 key文件，并且指定它们的路径。注意，本地私有证书的key必须是解密状态，加密状态的key是不支持的</em></p>
<h4 id="代理设置"><a href="#代理设置" class="headerlink" title="代理设置"></a>代理设置</h4><p><em>由于频繁访问，可能会被限制IP或封IP</em></p>
<p><em>网站可能会弹出验证码，或者跳转到登录认证页面，更甚者可能会宜接封禁客户端<br>的 I P , 导致一定时间段内无法访问</em></p>
<h5 id="HTTP代理"><a href="#HTTP代理" class="headerlink" title="HTTP代理"></a>HTTP代理</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'xxxx'</span>, <span class="string">'https'</span>: <span class="string">'xxxx'</span>&#125;</span><br><span class="line">requets.get(url, proxies=proxies)</span><br></pre></td></tr></table></figure>

<p><em>若代理需要使用HTTP Basic A u th ,可以使用类似<a href="http://user:password@host:port这样的语法来设置代理" rel="external nofollow noopener noreferrer" target="_blank">http://user:password@host:port这样的语法来设置代理</a></em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://user:password@10.10.1.10:3128'</span>&#125;  </span><br><span class="line"></span><br><span class="line">requests.get(url, proxies=proxies)</span><br></pre></td></tr></table></figure>

<h5 id="SOCKS协议代理"><a href="#SOCKS协议代理" class="headerlink" title="SOCKS协议代理"></a>SOCKS协议代理</h5><p><em>除了基本的HTTP代理外, requests还 支 持 SOCKS协议的代理</em></p>
<p><em>首先，需要 安 装 socks这个库</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install <span class="string">'requests[socks]'</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxies=&#123;<span class="string">'http'</span>:<span class="string">'socks5://user:password@host:port'</span>, <span class="string">'https'</span>: <span class="string">'socks5://user:password@host:port'</span>&#125;</span><br><span class="line">r = requests.get(url, proxies=proxies)</span><br></pre></td></tr></table></figure>

<h4 id="超时设置"><a href="#超时设置" class="headerlink" title="超时设置"></a>超时设置</h4><p><em>为了防止服务器不能及时响应，应该设置一个超时时间，即超过了这个时间还没有得到响应，那就报错。这需要用到timeout参数</em></p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url, timeout=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><em>实际上，请求分为两个阶段，即 连 接 (co n n e ct)和 读 取 ( read )<br>上面设置的tim eout将用作连接和读取这二者的tim eout总和</em></p>
<p><em>如果要分别指定，就可以传入一个元组：</em></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r = requests.get(url, timeout=(<span class="number">5</span>, <span class="number">11</span>, <span class="number">30</span>))</span><br></pre></td></tr></table></figure>

<p><em>如果想永久等待，可以直接将tim eout设置为 N on e,或者不设置直接留空，因为默认是None</em></p>
<hr>
<blockquote>
<p>有些路需要一个人走，有些事需要一个人扛，星光不问赶路人，时光不负有心人。</p>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/request%E5%BA%93/" rel="tag">request库</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python用法积累" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python%E7%94%A8%E6%B3%95%E7%A7%AF%E7%B4%AF.html" class="article-date">
      <time datetime="2020-04-05T01:29:49.000Z" itemprop="datePublished">2020-04-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python%E7%94%A8%E6%B3%95%E7%A7%AF%E7%B4%AF.html">python常用用法积累</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>

<h2 id="print"><a href="#print" class="headerlink" title="print"></a>print</h2><h3 id="print-“a”-“b”-“c”-sep-’-n’"><a href="#print-“a”-“b”-“c”-sep-’-n’" class="headerlink" title="print(“a”, “b”, “c”, sep=’\n’)"></a>print(“a”, “b”, “c”, sep=’\n’)</h3><p><em>a, b, c隔行打印</em></p>
<h2 id="isinstance"><a href="#isinstance" class="headerlink" title="isinstance"></a>isinstance</h2><h3 id="isinstance-e-reason-socket-timeout"><a href="#isinstance-e-reason-socket-timeout" class="headerlink" title="isinstance(e.reason, socket.timeout)"></a>isinstance(e.reason, socket.timeout)</h3><p><em>是在urllib实例看到的</em></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="一个数组-不论是字符型还是数值型-，另一个元组引用它，更改新的元组后，旧元组也会改变"><a href="#一个数组-不论是字符型还是数值型-，另一个元组引用它，更改新的元组后，旧元组也会改变" class="headerlink" title="一个数组(不论是字符型还是数值型)，另一个元组引用它，更改新的元组后，旧元组也会改变"></a>一个数组(不论是字符型还是数值型)，另一个元组引用它，更改新的元组后，旧元组也会改变</h3><h2 id="’xx’-join-‘a’-‘b’-‘c’"><a href="#’xx’-join-‘a’-‘b’-‘c’" class="headerlink" title="’xx’.join([‘a’, ‘b’, ‘c’])"></a>’xx’.join([‘a’, ‘b’, ‘c’])</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(’xx<span class="string">'.join(['</span>a<span class="string">', '</span><span class="string">b', '</span>c<span class="string">']))</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; axxbxxc</span></span><br></pre></td></tr></table></figure>

<h2 id="print-‘a’-‘b’-‘c’"><a href="#print-‘a’-‘b’-‘c’" class="headerlink" title="print(*[‘a’, ‘b’, ‘c’])"></a>print(*[‘a’, ‘b’, ‘c’])</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(*[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a b c</span><br></pre></td></tr></table></figure>



<h2 id="表达式-for-r-in-x"><a href="#表达式-for-r-in-x" class="headerlink" title="[表达式 for r in x]"></a>[表达式 for r in x]</h2><p><em>得到数组</em></p>
<h2 id="格式化字符串"><a href="#格式化字符串" class="headerlink" title="格式化字符串"></a>格式化字符串</h2><ul>
<li>‘kdjkf%skdk%d’%(‘xxx’, 5)</li>
<li>‘{0}dfsef{1}’.format(4, 5)</li>
</ul>
<hr>
<blockquote>
<p>不见黄河心不死，不撞南墙头不回。</p>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Python/">Python</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B8%B8%E7%94%A8%E7%94%A8%E6%B3%95/" rel="tag">常用用法</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python爬虫相关方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python%E7%88%AC%E8%99%AB%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95.html" class="article-date">
      <time datetime="2020-04-04T07:55:30.000Z" itemprop="datePublished">2020-04-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/python%E7%88%AC%E8%99%AB%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95.html">python爬虫相关知识</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <hr>
<script type="text/javascript" src="/js/src/bai.js"></script>

<h2 id="HTTP和POST测试"><a href="#HTTP和POST测试" class="headerlink" title="HTTP和POST测试"></a>HTTP和POST测试</h2><p>​    <strong><a href="http://httpbin.org" target="_blank" rel="external nofollow noopener noreferrer">http://httpbin.org</a></strong>提供HTTP测试</p>
<p>​    <strong><a href="http://httpbin.org/post" target="_blank" rel="external nofollow noopener noreferrer">http://httpbin.org/post</a></strong>提供POST测试</p>
<h2 id="if-isinstance-e-reason-socket-timeout"><a href="#if-isinstance-e-reason-socket-timeout" class="headerlink" title="if isinstance(e.reason, socket.timeout)"></a>if isinstance(e.reason, socket.timeout)</h2><h2 id="一个标准的url格式"><a href="#一个标准的url格式" class="headerlink" title="一个标准的url格式"></a>一个标准的url格式</h2><p><strong>scheme://netloc/path;params?query#fragment</strong></p>
<p><em>//前面的就是scheme，代表协议；第一个/符号前面便是n e tlo c ,即域名，后面是 p a th ,即访问路径；分号;前面是param s,代表参数；问号?后面是查询条件query, 一般用作GET类型的URL；#后面是锚点，用于直接定位页面内部的下拉位置。</em></p>
<h2 id="网页标签属性值之间有空格，代表这是两个值"><a href="#网页标签属性值之间有空格，代表这是两个值" class="headerlink" title="网页标签属性值之间有空格，代表这是两个值"></a>网页标签属性值之间有空格，代表这是两个值</h2><p>**&lt;li class=”li li-first”xa href =”link.html”&gt;first item&lt;/ax/li&gt;  **</p>
<p><em>li和li-first就是两个不同的值</em></p>
<hr>
<blockquote>
<p>你给世界什么姿态，世界将还你什么样的人生。</p>
</blockquote>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/14/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/16/">Next &amp;raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2021 TTYONG
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank" rel="external nofollow noopener noreferrer">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit">海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>


<script src="/js/main.js"></script>


    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"live2d-widget-model-hibiki"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
